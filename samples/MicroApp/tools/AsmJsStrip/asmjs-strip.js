var fs = require('fs');
var path = require('path');
var UglifyJS = require('uglify-js');

var asmJsInputFilename = path.resolve(process.argv[2]);
var asmJsOutputFilename = path.resolve(process.argv[3]);
var usedFunctionNames = ['_mono_wasm_load_runtime', '_monoeg_g_setenv', '_pthread_mutex_lock', '_pthread_mutex_unlock', '_mono_jit_set_aot_mode', '_m_strdup', '_strlen', '_malloc', '_sbrk', '_memcpy', '_mono_set_assemblies_path', '_monoeg_g_strsplit', '_strncmp', '_monoeg_strdup_11073', '_monoeg_g_memdup', '_monoeg_malloc', '_add_to_vector', '_mono_path_canonicalize', '_monoeg_g_path_is_absolute', '_monoeg_g_get_current_dir', '_monoeg_realloc', '_realloc', '_getcwd', '___syscall_ret', '_monoeg_g_build_path', '_monoeg_g_string_sized_new', '_monoeg_g_string_append_len', '_monoeg_g_string_free', '_monoeg_g_free', '_free', '_monoeg_g_strreverse', '_strchr', '___strchrnul', '_monoeg_g_hasenv', '_monoeg_g_file_test', '_stat', '_mono_jit_init_version', '_mini_init', '_mono_interp_init', '_mono_native_tls_alloc', '_set_context', '_mono_native_tls_set_value', '_mono_tls_get_jit_tls', '_mono_interp_transform_init', '_mono_os_mutex_init_recursive_1491', '_mono_os_mutex_init_recursive_674', '_mono_cross_helpers_run', '_mono_counters_init', '_mono_os_mutex_init_9714', '_initialize_system_counters', '_register_internal', '_mono_os_mutex_lock_9730', '_monoeg_strdup_9733', '_mono_os_mutex_unlock_9732', '_mini_jit_init', '_mono_counters_register', '_mono_os_mutex_init_recursive_969', '_mini_jit_init_job_control', '_mono_coop_mutex_init', '_mono_os_mutex_init', '_monoeg_g_ptr_array_new', '_monoeg_g_ptr_array_sized_new', '_monoeg_malloc0', '_monoeg_g_calloc', '_calloc', '_memset', '_mono_parse_default_optimizations', '_parse_optimizations', '_mono_hwcap_init', '_monoeg_g_getenv', '_mono_arch_cpu_optimizations', '_mono_set_generic_sharing_vt_supported', '_mono_tls_init_runtime_keys', '_mono_native_tls_alloc_10490', '_mono_code_manager_new', '_mono_install_callbacks', '_mono_w32handle_init', '_mono_os_mutex_init_7314', '_mono_os_cond_init_7315', '_mono_thread_info_runtime_init', '_mono_code_manager_init', '_mono_code_manager_install_callbacks', '_mono_unwind_init', '_mono_os_mutex_init_recursive_1662', '_mono_trampolines_init', '_mono_os_mutex_init_recursive_806', '_mono_aot_init', '_mono_os_mutex_init_recursive_11276', '_monoeg_g_hash_table_new', '_monoeg_g_spaced_primes_closest', '_mono_install_assembly_load_hook', '_mono_thread_info_signals_init', '_mono_threads_install_cleanup', '_mono_install_create_domain_hook', '_mono_install_free_domain_hook', '_mono_install_get_cached_class_info', '_mono_install_get_class_from_name', '_mono_install_jit_info_find_in_aot', '_mono_profiler_started', '_mono_init_version', '_mono_init_internal', '_mono_w32handle_namespace_init', '_mono_coop_mutex_init_7228', '_mono_os_mutex_init_7229', '_mono_w32mutex_init', '_mono_w32handle_register_ops', '_mono_w32handle_register_capabilities', '_mono_w32semaphore_init', '_mono_w32event_init', '_mono_w32process_init', '_getpid', '_process_set_defaults', '_mono_100ns_datetime', '_mono_100ns_datetime_from_timeval', '___muldi3', '___muldsi3', '_i64Add', '_process_set_name', '_monoeg_g_get_prgname', '_mono_utf8_from_external', '_mono_trace_7443', '_mono_tracev_inner', '_mono_trace_init', '_monoeg_g_queue_new', '_monoeg_strdup_10894', '_mono_trace_set_mask_string', '_mono_trace_set_mask', '_mono_trace_set_level_string', '_strcmp', '_mono_trace_set_level', '_mono_trace_set_logheader_string', '_mono_trace_set_logdest_string', '_mono_trace_set_log_handler_internal', '_mono_log_open_logfile', '_monoeg_log_set_default_handler', '_mono_w32handle_new', '_mono_os_mutex_lock_7267', '_mono_w32handle_new_internal', '_mono_w32handle_ops_typesize', '_process_typesize', '_mono_os_mutex_unlock_7270', '_mono_w32handle_ops_typename', '_process_typename', '_mono_trace_7285', '_mono_os_mutex_init_7439', '_mono_w32file_init', '_mono_fdhandle_register', '_mono_lazy_initialize_11770', '_mono_atomic_cas_i32', '_initialize_11771', '_monoeg_g_hash_table_new_full', '_mono_coop_mutex_init_11775', '_mono_os_mutex_init_11776', '_mono_coop_mutex_init_7107', '_mono_os_mutex_init_7110', '_mono_perfcounters_init', '_mono_os_mutex_init_recursive_4884', '_mono_shared_area', '_malloc_shared_area', '_mono_gc_base_init', '_sgen_gc_init', '_mono_100ns_ticks', '_mono_coop_mutex_init_8520', '_mono_os_mutex_init_8670', '_init_stats', '_sgen_init_internal_allocator', '_block_size', '_mono_pagesize', '_mono_lock_free_allocator_init_size_class', '_mono_lock_free_queue_init', '_mono_lock_free_allocator_init_allocator', '_index_for_size', '_sgen_init_nursery_allocator', '_sgen_register_fixed_internal_mem_type', '_sgen_client_init', '_mono_thread_callbacks_init', '_mono_thread_info_callbacks_init', '_mono_thread_info_init', '_mono_native_tls_alloc_10361', '_mono_os_sem_init_10315', '_mono_os_mutex_init_10365', '_mono_lls_init', '_mono_thread_smr_init', '_mono_os_mutex_init_recursive_9565', '_mono_thread_small_id_alloc', '_mono_os_mutex_lock_9533', '_mono_bitset_new', '_mono_bitset_find_first_unset', '_find_first_unset', '_mono_valloc', '_mono_valloc_aligned', '_posix_memalign', '_internal_memalign_12716', '_dispose_chunk', '_mono_mprotect', '_mono_os_mutex_unlock_9541', '_mono_bitset_clone', '_mono_bitset_free', '_mono_threads_coop_init', '_mono_threads_is_coop_enabled', '_mono_threads_is_blocking_transition_enabled', '_mono_sgen_init_stw', '_mono_tls_init_gc_keys', '_mono_thread_info_attach', '_register_thread', '_mono_thread_info_register_small_id', '_mono_thread_info_get_small_id', '_mono_native_tls_set_value_10303', '_mono_native_thread_id_get', '_mono_thread_info_set_tid', '_mono_refcount_initialize_10314', '_mono_os_event_init', '_mono_lazy_initialize_10604', '_initialize_10606', '_mono_os_mutex_init_10609', '_mono_thread_info_get_stack_bounds', '_mono_threads_platform_get_stack_bounds', '_monoeg_g_byte_array_new', '_monoeg_g_array_new', '_ensure_capacity', '_thread_attach', '_mono_gc_thread_attach', '_sgen_thread_attach', '_sgen_client_thread_attach', '_mono_tls_set_sgen_thread_info', '_mono_native_tls_set_value_10534', '_mono_thread_info_get_tid_6035', '_binary_protocol_thread_register', '_protocol_entry', '_mono_handle_stack_alloc', '_new_handle_stack', '_new_handle_chunk', '_mono_threads_transition_attach', '_get_thread_state', '_get_thread_suspend_count', '_trace_state_change', '_check_thread_state', '_mono_thread_info_suspend_lock', '_mono_thread_info_current_unchecked', '_mono_thread_info_is_live', '_mono_thread_info_suspend_lock_with_info', '_mono_thread_info_is_current', '_mono_thread_info_get_tid_10285', '_mono_threads_enter_gc_safe_region_with_info', '_mono_os_sem_wait_10254', '_mono_threads_exit_gc_safe_region', '_mono_thread_info_insert', '_mono_hazard_pointer_get', '_mono_lls_insert', '_mono_lls_find', '_mono_lls_get_hazardous_pointer_with_mask', '_mono_lls_pointer_unmask_12342', '_mono_atomic_cas_ptr', '_mono_hazard_pointer_clear_all', '_mono_thread_info_suspend_unlock', '_mono_os_sem_post_10247', '_init_sgen_minor', '_sgen_simple_nursery_init', '_mono_cpu_count', '_fill_serial_ops', '_fill_serial_with_concurrent_major_ops', '_fill_parallel_ops', '_fill_parallel_with_concurrent_major_ops', '_init_sgen_major', '_sgen_marksweep_init', '_sgen_marksweep_init_internal', '_ms_calculate_block_obj_sizes', '_sgen_alloc_internal_dynamic', '_mono_lock_free_alloc', '_alloc_from_active_or_partial', '_heap_get_partial', '_list_get_partial', '_mono_lock_free_queue_dequeue', '_mono_get_hazardous_pointer', '_is_dummy', '_alloc_from_new_sb', '_desc_alloc', '_mono_lock_free_queue_node_init', '_alloc_sb', '_set_anchor', '_ms_find_block_obj_size_index', '_sgen_get_minor_collector', '_alloc_nursery', '_sgen_alloc_internal', '_sgen_memgov_try_alloc_space', '_sgen_memgov_available_free_space', '_sgen_client_total_allocated_heap_changed', '_mono_runtime_resource_check_limit', '_major_alloc_heap', '_sgen_alloc_os_memory_aligned', '_prot_flags_for_activate', '_sgen_assert_memory_alloc', '_sgen_update_heap_boundaries', '_sgen_nursery_allocator_set_nursery_bounds', '_init_nursery', '_sgen_fragment_allocator_add', '_sgen_fragment_allocator_alloc', '_unmask', '_sgen_pinning_init', '_mono_os_mutex_init_9150', '_sgen_cement_init', '_post_param_init', '_sgen_thread_pool_start', '_sgen_memgov_init', '_mono_os_mutex_init_9053', '_sgen_card_table_init', '_sgen_alloc_os_memory', '_sgen_get_major_collector', '_sgen_make_user_root_descriptor', '_sgen_register_root', '_sgen_gc_lock', '_mono_coop_mutex_lock_8476', '_mono_os_mutex_trylock_8477', '_pthread_mutex_trylock', '_sgen_hash_table_lookup', '_lookup', '_sgen_hash_table_replace', '_rehash_if_necessary', '_rehash_8759', '_sgen_free_internal_dynamic', '_sgen_aligned_addr_hash_8323', '_sgen_gc_unlock', '_mono_coop_mutex_unlock_8472', '_mono_os_mutex_unlock_8473', '_sgen_init_bridge', '_sgen_gc_initialized', '_mono_coop_mutex_init_recursive', '_mono_os_mutex_init_recursive_2708', '_mono_metadata_init', '_monoeg_g_hash_table_insert_replace', '_rehash_10758', '_mono_type_hash', '_mono_type_equal', '_mono_os_mutex_init_recursive_4330', '_mono_images_init', '_mono_os_mutex_init_recursive_3346', '_install_pe_loader', '_mono_install_image_loader', '_monoeg_g_slist_prepend', '_monoeg_g_slist_alloc', '_mono_assemblies_init', '_mono_assembly_getrootdir', '_mono_set_rootdir', '_readlink', '___errno_location', '___pthread_self_108', '_pthread_self', '_monoeg_g_strdup_printf', '_monoeg_g_vasprintf', '_vsnprintf', '_vfprintf', '_printf_core', '_getint', '_out', '___fwritex', '_sn_write', '_pop_arg', '_fmt_u', '_pad_674', '_fallback', '_mono_config_get_assemblies_dir', '_mono_config_get_cfg_dir', '_mono_set_dirs', '_mono_assembly_setrootdir', '_monoeg_strdup_1844', '_mono_set_config_dir', '_monoeg_strdup_4733', '_check_path_env', '_check_extra_gac_path_env', '_mono_os_mutex_init_recursive_1862', '_mono_os_mutex_init_1863', '_mono_classes_init', '_mono_os_mutex_init_2480', '_mono_native_tls_alloc_2481', '_mono_loader_init', '_mono_coop_mutex_init_recursive_3526', '_mono_os_mutex_init_recursive_3527',
'_mono_native_tls_alloc_3528', '_mono_reflection_init', '_mono_reflection_emit_init', '_mono_dynamic_images_init', '_mono_os_mutex_init_2867', '_mono_runtime_init_tls', '_mono_marshal_init_tls', '_mono_native_tls_alloc_3726', '_mono_domain_create', '_mono_coop_mutex_lock_2702', '_mono_os_mutex_trylock_2720', '_mono_gc_make_descr_from_bitmap', '_mono_coop_mutex_unlock_2703', '_mono_os_mutex_unlock_2717', '_mono_gc_is_moving', '_mono_gc_alloc_fixed', '_mono_gc_register_root', '_mono_mempool_new', '_mono_mempool_new_size', '_lock_free_mempool_new', '_mono_g_hash_table_new_type', '_mono_gc_make_vector_descr', '_mono_gc_register_root_wbarrier', '_mono_jit_code_hash_init', '_mono_internal_hash_table_init', '_mono_jit_info_table_new', '_jit_info_table_new_chunk', '_domain_id_alloc', '_mono_atomic_inc_i32', '_mono_debug_domain_create', '_mini_create_jit_domain_info', '_mono_conc_hashtable_new_full', '_mono_conc_hashtable_new', '_conc_table_new', '_mono_tls_set_domain', '_mono_thread_info_current', '_mono_thread_info_tls_set', '_get_runtime_by_version', '_mono_assembly_load_corlib', '_mono_assembly_name_new', '_mono_assembly_name_parse', '_mono_assembly_name_parse_full', '_monoeg_g_strchomp', '_isspace', '_monoeg_g_strchug', '_unquote', '_build_assembly_name', '_monoeg_g_strfreev', '_invoke_assembly_preload_hook', '_mono_assembly_name_free', '_load_in_path', '_mono_assembly_open_predicate', '_mono_trace_1894', '_mono_assembly_is_in_gac', '_mono_make_shadow_copy', '_monoeg_g_path_get_dirname', '_strrchr_seperator', '_strrchr', '___memrchr', '_strncpy', '___stpncpy', '_mono_domain_get', '_mono_tls_get_domain', '_set_domain_search_path', '_mono_os_mutex_lock_1726', '_mono_os_mutex_unlock_1727', '_mono_is_shadow_copy_enabled', '_mono_image_open_a_lot', '_get_loaded_images_hash', '_mono_path_resolve_symlinks', '_monoeg_g_strndup', '_try_realloc_chunk', '_monoeg_strdup_10044', '_memchr', '_resolve_symlink', '_mono_os_mutex_lock_3391', '_monoeg_g_hash_table_lookup', '_monoeg_g_hash_table_lookup_extended', '_monoeg_g_str_hash', '_mono_os_mutex_unlock_3392', '_do_mono_image_open', '_mono_file_map_open', '_open', '_mono_file_map_size', '_mono_file_map_fd', '_fstat', '_mono_file_map', '_mono_file_map_fileio', '_lseek', '_read', '_mono_security_core_clr_determine_platform_image', '_default_platform_check', '_mono_file_map_close', '_close', '_dummy_738', '_do_mono_image_load', '_mono_image_init', '_mono_property_hash_new', '_pe_image_match', '_mono_verifier_verify_pe_data', '_mono_image_load_pe_data', '_pe_image_load_pe_data', '_do_load_header', '_load_section_tables', '_mono_verifier_verify_cli_data', '_mono_image_load_cli_data', '_pe_image_load_cli_data', '_mono_image_load_cli_header', '_mono_cli_rva_image_map', '_mono_image_load_metadata', '_load_metadata_ptrs', '_mono_read16', '_mono_read32', '_pe_image_load_tables', '_mono_guid_to_string', '_fmt_x', '_bitshift64Lshr', '_load_tables', '_mono_read64', '_bitshift64Shl', '_mono_metadata_compute_table_bases', '_mono_metadata_compute_size', '_get_nrows', '_idx_size', '_is_problematic_image', '_hash_guid', '_mono_verifier_verify_table_data', '_mono_image_load_names', '_mono_metadata_decode_row_col', '_mono_metadata_string_heap', '_load_modules', '_register_image', '_get_loaded_images_by_name_hash', '_mono_assembly_load_from_predicate', '_absolute_dir', '_monoeg_g_strconcat', '_strcpy', '___stpcpy', '_strcat', '_mono_assembly_fill_assembly_name', '_mono_assembly_fill_assembly_name_full', '_mono_metadata_decode_row', '_mono_metadata_blob_heap', '_mono_metadata_decode_blob_size', '_mono_digest_get_public_token', '_mono_sha1_get_digest', '_mono_sha1_init', '_mono_sha1_update', '_mono_sha1_final', '_SHA1Transform', '_llvm_bswap_i32', '_encode_public_tok', '_monoeg_g_strlcpy', '_mono_image_addref', '_mono_assembly_invoke_search_hook_internal', '_mono_assembly_has_reference_assembly_attribute', '_mono_assembly_metadata_foreach_custom_attr', '_mono_metadata_custom_attrs_from_index', '_mono_binary_search', '_table_locator', '_custom_attr_class_name_from_method_token', '_custom_attr_class_name_from_methoddef', '_mono_metadata_typedef_from_method', '_typedef_locator', '_has_reference_assembly_attribute_iterator', '_mono_error_cleanup', '_is_managed_exception', '_is_boxed', '_mono_os_mutex_lock_1885', '_monoeg_g_list_prepend', '_new_node', '_monoeg_g_list_alloc', '_mono_os_mutex_unlock_1886', '_mono_assembly_invoke_load_hook', '_load_aot_module', '_mono_get_root_domain', '_mono_os_mutex_lock_11268', '_mono_os_mutex_unlock_11269', '_mono_dl_open', '_mono_dl_convert_flags', '_mono_dl_open_file', '_get_dl_name_from_libtool', '_fopen', '___fmodeflags', '_mono_dl_current_error_string', '_monoeg_strdup_9765', '_mono_trace_11281', '_monoeg_g_path_get_basename', '_monoeg_strdup_10950', '_mono_config_for_assembly', '_mono_config_string_for_assembly_file', '_mono_image_get_filename', '_mono_config_parse_file_with_context', '_mono_trace_4759', '_monoeg_g_file_get_contents', '_mono_image_get_name', '_get_assembly_filename', '_mono_get_config_dir', '_mono_image_close', '_mono_image_close_except_pools', '_mono_atomic_dec_i32', '_mono_assembly_get_image', '_mono_class_load_from_name', '_mono_class_from_name_checked', '_mono_class_from_name_checked_aux', '_monoeg_g_direct_hash', '_mono_aot_get_class_from_name', '_mono_image_init_name_cache', '_monoeg_g_direct_equal', '_monoeg_g_str_equal', '_do_rehash_10759', '_monoeg_g_hash_table_destroy', '_mono_image_lock', '_mono_image_unlock', '_mono_class_get_checked', '_mono_class_create_from_typedef', '_mono_loader_lock', '_mono_coop_mutex_lock_3665', '_mono_os_mutex_trylock_3667', '_mono_internal_hash_table_lookup', '_mono_metadata_has_generic_params', '_mono_metadata_get_generic_param_row', '_mono_image_alloc0', '_mono_atomic_fetch_add_i32', '_mono_mempool_alloc0', '_mono_class_set_flags', '_mono_internal_hash_table_insert', '_class_key_extract', '_class_next_value', '_resize_if_needed', '_mono_class_is_gtd_2108', '_mono_class_setup_parent', '_mono_is_corlib_image', '_mono_class_setup_mono_type', '_mono_class_get_flags', '_mono_metadata_nested_in_typedef', '_mono_metadata_interfaces_from_typedef_full', '_mono_class_set_first_field_idx', '_mono_class_has_static_metadata', '_mono_class_is_ginst_2066', '_mono_class_set_first_method_idx', '_mono_class_set_field_count', '_mono_class_set_method_count', '_mono_loader_unlock', '_mono_coop_mutex_unlock_3672', '_mono_os_mutex_unlock_3581', '_mono_error_ok', '_mono_metadata_token_from_dor', '_mono_class_is_ginst_2114', '_mono_mempool_alloc', '_get_next_size', '_mono_class_get_and_inflate_typespec_checked', '_mono_get_unique_iid', '_classes_lock', '_mono_os_mutex_lock_2281', '_mono_bitset_set', '_classes_unlock', '_mono_os_mutex_unlock_2278', '_mono_bitset_size', '_mono_class_create_from_typespec', '_mono_type_retrieve_from_typespec', '_mono_type_create_from_typespec_checked', '_mono_conc_hashtable_lookup', '_mono_verifier_verify_typespec_signature', '_mono_metadata_decode_value', '_mono_metadata_parse_type_checked', '_mono_metadata_parse_type_internal', '_do_mono_metadata_parse_type', '_do_mono_metadata_parse_generic_class', '_mono_metadata_parse_typedef_or_ref', '_mono_metadata_load_generic_params', '_mono_get_shared_generic_inst', '_mono_generic_container_get_param_4368', '_mono_metadata_get_generic_inst', '_mono_class_is_open_constructed_type', '_type_is_gtd', '_mono_metadata_get_canonical_generic_inst', '_collect_data_init', '_collect_ginst_images', '_collect_type_images', '_get_image_for_generic_param', '_mono_generic_param_owner_2146', '_get_image_for_container', '_add_image', '_get_image_set', '_img_set_cache_get', '_hash_images', '_mix_hash', '_image_sets_lock', '_mono_os_mutex_lock_4327', '_monoeg_g_ptr_array_add', '_monoeg_ptr_array_grow', '_img_set_cache_add', '_image_sets_unlock', '_mono_os_mutex_unlock_4324', '_collect_data_free', '_mono_image_set_lock', '_mono_metadata_generic_inst_hash', '_mono_metadata_type_hash', '_mono_metadata_generic_param_hash', '_mono_generic_param_num_4342', '_mono_generic_param_info_4351', '_mono_generic_param_is_fullsize_4352', '_mono_generic_param_owner_4345', '_mono_image_set_alloc0', '_mono_image_set_unlock', '_mono_metadata_type_dup', '_mono_class_set_generic_container', '_mono_class_is_gtd_2076', '_mono_metadata_lookup_generic_class', '_mono_metadata_is_type_builder_generic_type_definition', '_mono_class_get_generic_container', '_collect_gclass_images', '_mono_generic_class_hash', '_mono_metadata_generic_context_hash', '_mono_conc_hashtable_insert', '_enable_gclass_recording', '_disable_gclass_recording', '_mono_metadata_load_generic_param_constraints_checked', '_mono_generic_container_get_param_info_4526', '_get_constraints', '_compare_type_literals', '_mono_class_from_mono_type', '_mono_class_is_gtd_4310', '_mono_metadata_parse_generic_inst', '_mono_metadata_str_hash', '_mono_metadata_free_type', '_mono_generic_class_get_class', '_mono_class_is_nullable', '_mono_class_try_get_generic_class', '_mono_generic_class_setup_parent', '_mono_metadata_generic_inst_equal', '_mono_generic_inst_equal_full', '_do_mono_metadata_type_equal', '_mono_generic_class_equal', '__mono_metadata_generic_class_equal', '_mono_metadata_class_equal', '_mono_class_is_ginst_4346', '_expand_table', '_conc_table_lf_free', '_mono_thread_hazardous_try_free', '_is_pointer_hazardous', '_conc_table_free', '_mono_class_get_field_count', '_mono_class_try_load_from_name', '_mono_assembly_load_friends', '_mono_custom_attrs_from_assembly_checked', '_mono_custom_attrs_from_index_checked', '_monoeg_g_list_length', '_mono_get_method_checked', '_mono_get_method_from_token', '_mono_class_try_get_generic_container', '_mono_verifier_verify_cattr_blob', '_monoeg_g_list_free', '_monoeg_g_list_free_1', '_mono_error_assert_ok_pos', '_mono_class_try_get_internals_visible_class', '_memmove', '_split_key_value', '_monoeg_g_ascii_strncasecmp', '_monoeg_g_ascii_tolower', '_parse_public_key', '_monoeg_g_ascii_xdigit_value', 
'_isxdigit', '_mono_metadata_encode_value', '_mono_custom_attrs_free', '_search_modules', '_mono_class_init', '_mono_class_has_failure', '_monoeg_g_slist_find', '_mono_native_tls_set_value_2225', '_mono_verifier_is_enabled_for_class', '_mono_class_get_cached_class_info', '_mono_aot_get_cached_class_info', '_init_sizes_with_info', '_mono_class_setup_fields', '_mono_class_setup_basic_field_info', '_mono_class_alloc0', '_mono_class_alloc', '_mono_image_alloc', '_mono_class_has_static_metadata_2179', '_mono_class_get_first_field_idx', '_mono_metadata_packing_from_typedef', '_mono_class_layout_fields', '_monoeg_g_slist_remove', '_find_prev_11038', '_monoeg_g_slist_free_1', '_mono_class_setup_supertypes', '_initialize_object_slots', '_mono_class_setup_vtable', '_mono_class_setup_vtable_full', '_monoeg_g_list_find', '_mono_class_get_overrides_full', '_mono_class_setup_vtable_general', '_mono_class_get_implemented_interfaces', '_collect_implemented_interfaces_aux', '_mono_class_setup_interfaces', '_mono_class_get_method_count', '_mono_class_need_stelemref_method', '_setup_interface_offsets', '_mono_class_get_virtual_methods', '_mono_class_get_first_method_idx', '_mono_metadata_decode_table_row_col', '_mono_class_is_abstract_2295', '_monoeg_g_slist_free', '_monoeg_g_list_remove', '_disconnect_node', '_find_method_in_metadata', '_mono_metadata_decode_table_row', '_mono_class_set_type_load_failure_causedby_class', '_mono_class_is_gparam', '_set_interface_and_offset', '_find_interface', '_count_virtual_methods', '_mono_class_get_generic_type_definition', '_monoeg_g_ptr_array_free', '_mono_class_inflate_generic_class_checked', '_mono_class_inflate_generic_type_checked', '_mono_class_inflate_generic_type_with_mempool', '_inflate_generic_type', '_mono_metadata_get_shared_type', '_monoeg_g_slist_append', '_monoeg_g_slist_concat', '_mono_metadata_generic_param_equal_internal', '_mono_metadata_parse_generic_param', '_select_container', '_get_anonymous_container_for_image', '_mono_metadata_inflate_generic_inst', '_mono_type_get_generic_param_num', '_mono_generic_param_num', '_is_valid_generic_argument', '_mono_class_get_method_from_name', '_mono_class_get_method_from_name_flags', '_mono_method_signature_checked', '_mono_class_is_ginst_3553', '_mono_method_get_generic_container', '_mono_metadata_method_has_param_attrs', '_mono_verifier_verify_method_signature', '_mono_metadata_parse_method_signature_full', '_mono_metadata_get_param_attrs', '_mono_metadata_signature_alloc', '_mono_metadata_signature_size', '_mono_code_manager_set_read_only', '_mono_marshal_use_aot_wrappers', '_mono_install_imt_trampoline_builder', '_mono_set_always_build_imt_trampolines', '_mono_icall_init', '_mono_os_mutex_init_3104', '_mono_exceptions_init', '_mono_aot_get_trampoline', '_mono_aot_get_trampoline_full', '_monoeg_strdup_11230', '_mono_aot_tramp_info_register', '_mono_tramp_info_register_internal', '_mono_domain_alloc0', '_mono_domain_lock', '_mono_domain_unlock', '_monoeg_strdup_542', '_mono_tramp_info_free', '_mono_install_eh_callbacks', '_mono_install_get_seq_point', '_mini_gc_init', '_mono_gc_set_gc_callbacks', '_register_jit_stats', '_mono_marshal_init', '_mono_os_mutex_init_recursive_3729', '_register_icall_3732', '_mono_create_icall_signature', '_type_from_typename', '_mono_register_jit_icall', '_mono_register_jit_icall_full', '_mono_icall_lock', '_mono_os_mutex_lock_3118', '_mono_icall_unlock', '_mono_os_mutex_unlock_3115', '_register_icall_no_wrapper_3791', '_mono_cominterop_init', '_register_icall_11646', '_register_icalls', '_mono_add_internal_call', '_monoeg_strdup_3114', '_register_icall', '_mono_get_throw_exception', '_register_dyn_icall', '_mono_get_rethrow_exception', '_mono_get_throw_corlib_exception', '_register_opcode_emulation', '_mono_gc_get_range_copy_func', '_sgen_get_remset', '_register_icall_no_wrapper', '_register_icall_with_wrapper', '_mono_generic_sharing_init', '_mono_install_image_unload_hook', '_mono_os_mutex_init_recursive', '_mono_tasklets_init', '_register_trampolines', '_mono_mem_account_register_counters', '_mono_mem_account_type_name', '_sprintf', '_vsprintf', '_mono_install_runtime_cleanup', '_mono_runtime_init_checked', '_mono_monitor_init', '_mono_os_mutex_init_recursive_4640', '_mono_install_assembly_preload_hook', '_mono_install_assembly_refonly_preload_hook', '_mono_install_assembly_search_hook', '_mono_install_assembly_search_hook_internal', '_mono_install_assembly_refonly_search_hook', '_mono_install_assembly_postload_search_hook', '_mono_install_assembly_postload_refonly_search_hook', '_mono_thread_init', '_mono_coop_mutex_init_recursive_6605', '_mono_os_mutex_init_recursive_6610', '_mono_init_static_data_info', '_mono_object_new_pinned', '_mono_class_vtable', '_mono_class_vtable_full', '_mono_class_create_runtime_vtable', '_mono_field_resolve_type', '_mono_verifier_verify_field_signature', '_mono_type_get_underlying_type', '_mono_type_has_exceptions', '_mono_class_find_enum_basetype', '_mono_class_enum_basetype', '_mono_type_is_reference', '_mono_type_get_basic_type_from_generic', '_type_has_references', '_mono_type_is_struct', '_mono_type_size', '_mono_class_setup_methods', '_mono_class_get_context', '_mono_class_interface_offset', '_compare_interface_ids', '_memcmp', '_mono_class_is_ginst_5121', '_mono_class_has_finalizer', '_mono_class_data_size', '_alloc_vtable', '_mono_class_compute_gc_descriptor', '_compute_class_bitmap', '_mono_class_get_fields', '_mono_gc_make_descr_for_object', '_mono_gc_get_vtable_bits', '_sgen_need_bridge_processing', '_mini_get_vtable_trampoline', '_mini_get_imt_trampoline', '_mono_type_get_object_checked', '_mono_class_try_get_vtable', '_mono_g_hash_table_lookup', '_mono_g_hash_table_lookup_extended', '_mono_g_hash_table_find_slot', '_mono_type_normalize', '_mono_class_has_ref_info', '_mono_class_get_ref_info_handle', '_mono_property_bag_get', '_class_has_references', '_mono_class_init_sizes', '_mono_ptr_class_get', '_mono_image_strdup', '_mono_mempool_strdup', '_mono_aligned_addr_hash', '_mono_field_get_name', '_mono_class_value_size', '_mono_class_instance_size', '_mono_method_signature', '_mono_metadata_signature_equal', '_mono_method_get_vtable_slot', '_is_wcf_hack_disabled', '_field_is_special_static', '_mono_custom_attrs_from_field_checked', '_find_field_index', '_mono_gc_alloc_pinned_obj', '_sgen_alloc_obj_pinned', '_sgen_vtable_get_descriptor_8125', '_sgen_gc_descr_has_references_8126', '_major_alloc_small_pinned_obj', '_alloc_obj', '_ms_alloc_block', '_ms_get_empty_block', '_sgen_get_current_collection_generation', '_sgen_concurrent_collection_in_progress', '_update_heap_boundaries_for_block', '_add_free_block', '_sgen_array_list_add', '_sgen_array_list_grow', '_sgen_array_list_index_bucket_12318', '_sgen_array_list_bucket_size_12320', '_sgen_array_list_find_unset', '_sgen_array_list_bucketize_12327', '_sgen_array_list_default_is_slot_set', '_sgen_array_list_get_slot_12325', '_sgen_array_list_default_cas_setter', '_sgen_array_list_update_next_slot', '_unlink_slot_from_free_list_uncontested', '_ensure_can_access_block_free_list', '_mono_profiler_allocations_enabled', '_mono_g_hash_table_insert', '_mono_g_hash_table_insert_replace', '_mono_g_hash_table_key_store', '_mono_g_hash_table_value_store', '_mono_gc_wbarrier_generic_store', '_sgen_dummy_use_8502', '_mono_object_get_class', '_mono_metadata_type_equal', '_mono_class_get_generic_class', '_mono_generic_class_get_context', '_mono_metadata_generic_class_is_valuetype', '_mono_type_generic_inst_is_valuetype', '_mono_alloc_special_static_data', '_mono_threads_lock', '_mono_coop_mutex_lock_6600', '_mono_os_mutex_trylock_6601', '_search_slot_in_freelist', '_mono_alloc_static_data_slot', '_update_reference_bitmap', '_mono_threads_unlock', '_mono_coop_mutex_unlock_6533', '_mono_os_mutex_unlock_6534', '_mono_thread_attach', '_mono_thread_attach_full', '_mono_thread_internal_current_is_attached', '_mono_tls_get_thread', '_create_internal_thread_object', '_mono_metadata_parse_custom_mod', '_mono_verifier_verify_methodimpl_row', '_method_from_method_def_or_ref', '_verify_class_overrides', '_mono_class_is_assignable_from_slow', '_mono_method_get_method_definition', '_rehash', '_mono_gc_invoke_with_gc_lock', '_mono_coop_mutex_lock_6084', '_mono_os_mutex_trylock_6089', '_do_rehash', '_mono_coop_mutex_unlock_6085', '_mono_os_mutex_unlock_6086', '_mono_gc_deregister_root', '_sgen_deregister_root', '_sgen_hash_table_remove', '_sgen_free_internal', '_mono_lock_free_free', '_mono_object_new_mature', '_mono_gc_alloc_mature', '_sgen_alloc_obj_mature', '_alloc_degraded', '_sgen_need_major_collection', '_major_have_swept', '_sgen_memgov_calculate_minor_collection_allowance', '_get_heap_size', '_get_num_major_sections', '_major_alloc_degraded', '_sgen_vtable_get_descriptor_8909', '_sgen_gc_descr_has_references_8908', '_mono_object_register_finalizer', '_object_register_finalizer', '_mono_domain_is_unloading', '_mono_gc_register_for_finalization', '_sgen_object_register_for_finalization', '_add_stage_entry', '_get_next_managed_thread_id', '_create_thread_object', '_mono_gc_wbarrier_set_field', '_mono_gc_wbarrier_set_arrayref', '_sgen_card_table_wbarrier_set_field', '_sgen_dummy_use', '_mono_thread_attach_internal', '_mono_gchandle_new', '_sgen_gchandle_new', '_gc_handles_for_type', '_alloc_handle', '_is_slot_set', '_try_occupy_slot', '_try_set_slot', '_sgen_client_gchandle_created', '_mono_thread_info_set_internal_thread_gchandle', '_mono_threads_open_thread_handle', '_mono_refcount_increment_10346', '_mono_refcount_tryincrement_10347', '_mono_tls_set_thread', '_mono_thread_push_appdomain_ref', '_mono_thread_internal_current', '_ref_stack_new', '_ref_stack_push', '_mono_domain_set', '_mono_domain_set_internal', '_mono_domain_set_internal_with_options', '_mono_alloc_static_data', '_mono_gc_user_markers_supported', '_mono_gc_make_root_descr_user', '_set_current_thread_for_domain', '_get_current_thread_ptr_for_domain', 
'_mono_class_get_field_from_name', '_mono_class_get_field_from_name_full', '_get_thread_static_data', '_mono_thread_attach_cb', '_setup_jit_tls_data', '_mono_set_jit_tls', '_mono_tls_set_jit_tls', '_mono_set_lmf_addr', '_mono_tls_set_lmf_addr', '_mono_type_initialization_init', '_mono_coop_mutex_init_recursive_5107', '_mono_os_mutex_init_recursive_5108', '_mono_runtime_get_no_exec', '_create_domain_objects', '_mono_class_setup_interface_id', '_mono_image_set_alloc', '_mono_verifier_class_is_valid_generic_instantiation', '_method_from_memberref', '_mono_verifier_verify_memberref_method_signature', '_find_cached_memberref_sig', '_cache_memberref_sig', '_find_method_3624', '_find_method_in_class', '_mono_metadata_translate_token_index', '_verify_var_type_and_container', '_mono_class_get_method_by_index', '_mono_class_inflate_generic_method_full_checked', '_mono_metadata_get_image_set_for_method', '_collect_method_images', '_inflated_method_hash', '_mono_class_has_parent_2347', '_mono_class_has_parent_fast_2354', '_mono_class_implement_interface_slow', '_mono_class_has_variant_generic_params', '_mono_generic_container_get_param_info', '_mono_class_is_variant_compatible_slow', '_inflated_method_equal', '_mono_metadata_generic_context_equal', '_apply_override', '_check_interface_method_override', '_mono_method_get_context', '_mono_method_get_context_general', '_inflate_generic_signature_checked', '_mono_gc_make_descr_for_string', '_mono_string_new_checked', '_monoeg_g_utf8_to_utf16', '_eg_utf8_to_utf16_general', '_mono_string_new_utf16_checked', '_mono_string_new_size_checked', '_mono_gc_alloc_string', '_mono_tls_get_sgen_thread_info', '_sgen_try_alloc_obj_nolock', '_nursery_canaries_enabled', '_sgen_nursery_alloc_range', '_sgen_fragment_allocator_par_range_alloc', '_par_alloc_from_fragment', '_sgen_set_nursery_scan_start', '_zero_tlab_if_necessary', '_mono_string_chars', '_mono_string_intern_checked', '_mono_string_is_interned_lookup', '_mono_os_mutex_lock_5182', '_mono_string_hash', '_mono_string_length', '_mono_os_mutex_unlock_5174', '_mono_string_get_pinned', '_mono_field_static_set_value', '_mono_vtable_get_static_field_data', '_mono_copy_value', '_mono_exception_from_name_two_strings_checked', '_create_exception_two_strings', '_mono_object_new_checked', '_mono_object_new_specific_checked', '_mono_object_new_alloc_specific_checked', '_mono_gc_alloc_obj', '_sgen_alloc_obj', '_mono_class_get_methods', '_mono_method_get_name', '_mono_runtime_invoke_checked', '_do_runtime_invoke', '_mono_jit_runtime_invoke', '_mono_interp_runtime_invoke', '_mono_marshal_get_runtime_invoke_full', '_mono_method_get_wrapper_cache', '_get_cache', '_mono_os_mutex_lock_3843', '_mono_os_mutex_unlock_3844', '_mono_marshal_find_in_cache', '_get_wrapper_target_class', '_mono_signature_to_name', '_monoeg_g_string_new', '_monoeg_g_string_new_len', '_monoeg_g_string_append', '_monoeg_g_string_append_c', '_mono_type_get_desc', '_mono_mb_new', '_mono_mb_new_base', '_mono_mb_add_data', '_monoeg_strdup_4568', '_mono_mb_set_param_names', '_emit_runtime_invoke_body', '_mono_mb_add_local', '_monoeg_g_list_append', '_monoeg_g_list_last', '_mono_mb_emit_byte', '_mono_mb_emit_branch', '_mono_mb_emit_i4', '_mono_mb_patch_addr', '_mono_mb_get_label', '_emit_thread_force_interrupt_checkpoint', '_emit_thread_interrupt_checkpoint_call', '_mono_mb_emit_icall', '_mono_mb_emit_op', '_mono_mb_patch_branch', '_emit_invoke_call', '_mono_gc_make_root_descr_all_refs', '_mono_mb_emit_ldarg', '_mono_type_to_ldind', '_mono_mb_emit_stloc', '_mono_mb_emit_ldloc', '_mono_mb_get_pos', '_mono_mb_set_clauses', '_mono_wrapper_info_create', '_mono_mb_create_and_cache_full', '_mono_mb_create_method', '_monoeg_g_list_reverse', '_mono_marshal_set_wrapper_info', '_mono_mb_free', '_mono_interp_get_imethod', '_mono_os_mutex_lock', '_mono_os_mutex_unlock', '_mini_get_underlying_type', '_mini_type_get_underlying_type', '_mini_native_type_replace_type', '_mini_get_basic_type_from_generic', '_jit_info_key_extract', '_jit_info_next_value', '_mono_profiler_get_call_instrumentation_flags', '_init_frame', '_ves_exec_method_with_context', '_do_transform_method', '_interp_push_lmf', '_mono_push_lmf', '_mono_get_lmf_addr', '_mono_tls_get_lmf_addr', '_mono_arch_init_lmf_ext', '_mono_set_lmf', '_mono_interp_transform_method', '_mono_runtime_class_init_full', '_mono_image_check_for_module_cctor', '_mono_class_get_cctor', '_mono_method_get_header', '_mono_method_get_header_checked', '_mono_os_mutex_lock_1500', '_mono_type_native_stack_size', '_generate', '_store_inarg', '_mint_type_1526', '_monoeg_g_array_append_vals', '_load_arg', '_one_arg_branch', '_handle_branch', '_mono_thread_interruption_request_flag', '_get_data_item_index', '_mono_method_get_wrapper_data', '_mono_find_jit_icall_by_addr', '_mono_type_is_void', '_interp_transform_call', '_mono_class_get_magic_index', '_mono_class_is_magic_int', '_mono_class_is_magic_assembly', '_mono_class_is_magic_float', '_mono_class_is_subclass_of', '_mono_verifier_verify_method_header', '_mono_image_rva_map', '_mono_image_ensure_section_idx', '_mono_metadata_parse_mh_full', '_mini_type_is_reference', '_mono_metadata_free_mh', '_jit_call_supported', '_store_local', '_can_store', '_load_local', '_interp_save_debug_info', '_mono_debug_enabled', '_mono_jit_info_size', '_mono_jit_info_init', '_save_seq_points', '_monoeg_g_array_free', '_mono_mempool_destroy', '_i64Subtract', '_mono_os_mutex_unlock_1501', '_interp_pop_lmf', '_mono_pop_lmf', '_mono_class_is_interface_1517', '_mono_type_stack_size', '_mono_type_stack_size_internal', '_mono_get_method_full', '_mono_type_initialization_lock', '_mono_coop_mutex_lock_5180', '_mono_os_mutex_trylock_5181', '_mono_coop_cond_init_5155', '_mono_os_cond_init_5188', '_mono_type_initialization_unlock', '_mono_coop_mutex_unlock_5173', '_mono_threads_begin_abort_protected_block', '_mono_runtime_try_invoke', '_mono_native_thread_id_equals', '_interp_field_from_token', '_mono_field_from_token_checked', '_mono_metadata_typedef_from_field', '_mono_class_get_field', '_mono_class_get_field_idx', '_mono_class_is_gtd_3554', '_grow_code', '_mono_class_static_field_address', '_stackval_to_data', '_mono_gc_wbarrier_generic_nostore', '_sgen_card_table_wbarrier_generic_nostore', '_sgen_card_table_mark_address', '_sgen_card_table_get_card_address_8136', '_mono_threads_end_abort_protected_block', '_mono_thread_state_has_interruption', '_mono_type_init_lock', '_mono_coop_cond_broadcast_5163', '_mono_os_cond_broadcast_5177', '_pthread_cond_broadcast', '_mono_type_init_unlock', '_unref_type_lock', '_mono_coop_mutex_destroy_5165', '_mono_os_mutex_destroy_5150', '_mono_coop_cond_destroy_5166', '_mono_os_cond_destroy_5167', '_monoeg_g_hash_table_remove', '_mono_array_class_get', '_mono_bounded_array_class_get', '_mono_class_array_element_size', '_mono_class_bind_generic_parameters', '_mono_class_is_gtd_5764', '_mono_class_from_generic_parameter_internal', '_mono_generic_param_info_2144', '_mono_generic_param_is_fullsize_2361', '_make_generic_param_class', '_generic_array_methods', '_mono_method_set_generic_container', '_mono_image_property_insert', '_mono_property_hash_insert', '_create_array_method', '_setup_generic_array_ifaces', '_mono_class_inflate_generic_method_checked', '_mono_marshal_get_generic_array_helper', '_mono_mb_new_no_dup_name', '_mono_metadata_signature_dup_full', '_mono_metadata_signature_dup_internal', '_mono_metadata_signature_dup_internal_with_padding', '_mono_mb_emit_managed_call', '_mono_mb_create', '_mono_image_property_lookup', '_mono_property_hash_lookup', '_mono_class_get_image', '_mono_gc_init', '_mono_coop_mutex_init_recursive_3033', '_mono_os_mutex_init_recursive_3050', '_mono_gc_is_disabled', '_mono_coop_cond_init_3039', '_mono_os_cond_init_3044', '_mono_coop_mutex_init_3040', '_mono_os_mutex_init_3041', '_mono_coop_sem_init', '_mono_os_sem_init', '_mono_context_init_checked', '_mono_threads_register_app_context', '_mono_gc_reference_queue_new', '_mono_coop_mutex_lock_3002', '_mono_os_mutex_trylock_3019', '_mono_coop_mutex_unlock_3003', '_mono_os_mutex_unlock_3016', '_mono_gchandle_new_weakref', '_sgen_gchandle_new_weakref', '_context_adjust_static_data', '_mono_gc_reference_queue_add', '_ref_list_push', '_mono_context_set_default_context', '_mono_stack_mark_init_1713', '_mono_handle_new', '_mono_context_set_handle', '_mono_stack_mark_record_size', '_mono_stack_mark_pop_1714', '_mono_network_init', '_mono_w32socket_initialize', '_mono_console_init', '_mono_domain_fire_assembly_load', '_add_assemblies_to_domain', '_mono_assembly_addref', '_mono_trace', '_mono_field_get_value', '_mono_thread_current', '_mono_profiler_sampling_enabled', '_mono_wasm_assembly_load', '_mono_assembly_load', '_mono_assembly_load_full_internal', '_mono_assembly_load_full_nosearch', '_mono_assembly_remap_version', '_mono_get_runtime_info', '_mono_assembly_apply_binding', '_mono_assembly_loaded_full', '_mono_domain_assembly_search', '_mono_assembly_names_equal', '_assembly_names_equal_flags', '_mono_domain_assembly_preload', '_real_load', '_try_load_from', '_monoeg_g_slist_last', '_mono_wasm_assembly_find_class', '_mono_class_from_name', '_mono_class_from_typeref_checked', '_mono_verifier_verify_typeref_row', '_mono_assembly_load_reference', '_mono_assembly_get_assemblyref', '_assemblyref_public_tok', '_mono_assembly_binding_lock', '_search_binding_loaded', '_mono_assembly_binding_unlock', '_get_per_domain_assembly_binding_info', '_mono_assembly_load_publisher_policy', '_strstr', '_fourbyte_strstr', '_monoeg_g_utf8_strdown', '_utf8_case_conv', '_monoeg_g_utf8_to_ucs4_fast', '_monoeg_g_utf8_strlen', '_monoeg_g_ucs4_to_utf8', '_mono_image_open', '_mono_image_open_full', '_assembly_binding_maps_name', '_mono_public_tokens_are_equal', '_mono_wasm_assembly_find_method', '_check_policy_versions', '_mono_wasm_string_from_js', '_mono_string_new', '_mono_wasm_invoke_method', '_mono_runtime_invoke', '_mini_get_class', 
'_mono_class_check_vtable_constraints', '_method_from_methodspec', '_mono_verifier_verify_methodspec_signature', '_compare_img_set', '_get_anon_gparam_class', '_make_generic_name_string', '_monoeg_g_snprintf', '_set_anon_gparam_class', '_mono_verifier_verify_standalone_signature', '_inflate_generic_header', '_mono_array_new_checked', '_mono_array_element_size', '_mono_gc_make_descr_for_array', '_mono_array_new_specific_checked', '_mono_array_calc_byte_len', '_mono_gc_alloc_vector', '_mono_array_length', '_mono_array_addr_with_size', '_get_virtual_method', '_mono_ldstr', '_mono_ldstr_checked', '_mono_verifier_verify_string_signature', '_mono_metadata_user_string', '_mono_ldstr_metadata_sig', '_mono_string_equal', '_two_arg_branch', '_binary_arith_op', '_ves_array_element_address', '_ves_array_calculate_index', '_mono_marshal_get_virtual_stelemref', '_get_virtual_stelemref_kind', '_is_monomorphic_array', '_mono_class_is_sealed_4115', '_get_virtual_stelemref_wrapper', '_load_array_element_address', '_load_array_class', '_mono_mb_emit_ldflda', '_load_value_class', '_mono_mb_emit_exception', '_mono_mb_emit_exception_full', '_mono_object_isinst_checked', '_mono_stack_mark_init_5231', '_mono_object_handle_isinst', '_mono_class_is_interface_5237', '_mono_class_is_assignable_from', '_mono_type_is_generic_argument', '_mono_handle_assign_5338', '_mono_stack_mark_pop_5234', '_stackval_from_data', '_mono_find_jit_icall_by_name', '_mono_marshal_get_icall_wrapper', '_mono_mb_emit_calli', '_emit_thread_interrupt_checkpoint', '_twoway_strstr', '_mono_inflate_generic_signature', '_mono_metadata_get_inflated_signature', '_collect_inflated_signature_images', '_collect_signature_images', '_mono_signature_get_return_type', '_mono_signature_get_params', '_inflated_signature_hash', '_ves_pinvoke_method', '_build_args_from_sig', '_wasm_enter_icall_trampoline', '_type_to_c', '_wasm_invoke_viii', '_ves_icall_mono_delegate_ctor', '_mono_stack_mark_init', '_mono_delegate_ctor', '_mono_get_addr_from_ftnptr', '_mini_get_addr_from_ftnptr', '_mono_jit_info_table_find', '_mono_jit_info_table_find_internal', '_jit_info_table_find', '_jit_info_table_index', '_jit_info_table_chunk_index', '_mono_delegate_ctor_with_method', '_mono_class_has_parent_5452', '_mono_class_has_parent_fast_5454', '_mono_create_delegate_trampoline', '_mini_init_delegate', '_mono_interp_init_delegate', '_mono_error_set_pending_exception', '_mono_error_convert_to_exception', '_mono_stack_mark_pop', '_mono_field_get_type_checked', '_mono_class_inflate_generic_type_no_copy', '_fix_gclass_incomplete_instantiation', '_mono_class_get_nested_classes_property', '_get_pointer_property', '_mono_metadata_nesting_typedef', '_inflated_signature_equal', '_inflate_generic_context', '_field_from_memberref', '_mono_verifier_verify_memberref_field_signature', '_mono_metadata_get_corresponding_field_from_generic_type_definition', '_mono_metadata_type_equal_full', '_mono_object_handle_isinst_mbyref', '_mono_get_special_static_data', '_mono_get_special_static_data_for_thread', '_mono_class_is_interface', '_mono_class_interface_offset_with_variance', '_mono_marshal_get_delegate_invoke', '_mono_signature_no_pinvoke', '_mono_marshal_get_delegate_invoke_internal', '_check_generic_delegate_wrapper_cache', '_mono_generic_param_name', '_mono_generic_param_is_fullsize_2617', '_mono_generic_param_owner_2618', '_mono_mb_emit_icon', '_mono_mb_emit_add_to_local', '_mono_mb_emit_branch_label', '_cache_generic_delegate_wrapper', '_mono_marshal_get_wrapper_info', '_parse_section_data', '_dword_align', '_mono_get_method_constrained_with_method', '_get_method_constrained', '_mono_type_get_name_full', '_mono_type_get_name_recurse', '_mono_type_name_check_byref', '_mono_marshal_get_native_wrapper', '_mono_lookup_internal_call', '_mono_lookup_internal_call_full', '_concat_class_name', '_find_class_icalls', '_compare_class_imap', '_mono_signature_get_desc', '_find_method_icall', '_find_slot_icall', '_compare_method_imap', '_find_uses_handles_icall', '_mono_mb_emit_native_call', '_mono_mb_emit_ptr', '_wasm_invoke_ii', '_ves_icall_Mono_SafeStringMarshal_StringToUtf8', '_mono_string_to_utf8_checked', '_monoeg_g_utf16_to_utf8', '_decode_utf16le', '_monoeg_g_unichar_to_utf8', '_append_class_name', '_wasm_invoke_iiiii', '_ves_icall_System_Reflection_AssemblyName_ParseAssemblyName', '_shift_op', '_mono_ldtoken', '_mono_ldtoken_checked', '_signature_param_uses_handles', '_mono_signature_param_is_out', '_mono_type_is_byref', '_mono_class_get_byref_type', '_mono_get_intptr_class', '_mono_get_corlib', '_return_nested_in', '_mono_class_get_nested_types', '_setup_nested_types', '_g_list_prepend_image', '_mono_class_set_nested_classes_property', '_set_pointer_property', '_mono_property_bag_add', '_mono_mb_emit_ldloc_addr', '_do_icall', '_mono_icall_start', '_mono_stack_mark_init_3817', '_mono_icall_handle_new', '_ves_icall_System_Runtime_CompilerServices_RuntimeHelpers_InitializeArray', '_mono_field_get_data', '_mono_field_get_rva', '_mono_class_get_field_def_values', '_mono_class_set_field_def_values', '_mono_field_get_index', '_mono_metadata_field_info', '_mono_metadata_field_info_full', '_mono_icall_end', '_mono_stack_mark_pop_3816', '_store_arg', '_ves_icall_System_String_InternalAllocateStr', '_wasm_invoke_vii', '_ves_icall_Mono_RuntimeMarshal_FreeAssemblyName', '_wasm_invoke_vi', '_ves_icall_Mono_SafeStringMarshal_GFree', '_ves_icall_System_AppDomain_getCurDomain', '_wasm_invoke_i', '_ves_icall_System_Runtime_CompilerServices_RuntimeHelpers_GetOffsetToStringData', '_mono_metadata_signature_dup_add_this', '_mono_method_get_class', '_mono_class_is_valuetype', '_wasm_invoke_iiiiii', '_ves_icall_System_AppDomain_LoadAssembly', '_mono_string_handle_to_utf8', '_mono_assembly_get_object_handle', '_check_or_construct_handle', '_check_object_handle', '_assembly_object_construct', '_mono_class_get_mono_assembly_class', '_mono_handle_assign_5744', '_cache_object_handle', '_mono_conc_g_hash_table_new_type', '_conc_table_new_11884', '_mono_conc_g_hash_table_lookup', '_mono_conc_g_hash_table_lookup_extended', '_reflected_hash', '_alloc_reflected_entry', '_mono_conc_g_hash_table_insert', '_set_value', '_set_key', '_mono_loader_get_strict_strong_names', '_mono_type_get_checked', '_mono_class_get_type', '_mono_class_get_inflated_method', '_wasm_invoke_iii', '_ves_icall_System_Type_internal_from_handle', '_mono_type_get_object_handle', '_wasm_invoke_iiii', '_ves_icall_RuntimeTypeHandle_type_is_assignable_from', '_ves_icall_RuntimeType_MakeGenericType', '_mono_class_init_checked', '_mono_array_handle_length', '_mono_handle_array_getref', '_mono_reflection_bind_generic_parameters', '_mono_is_sre_type_builder', '_mono_is_sre_generic_instance', '_mono_reflection_type_handle_mono_type', '_mono_class_is_ginst_3172', '_ves_icall_RuntimeType_GetConstructors_native', '_mono_value_copy', '_mono_gc_wbarrier_value_copy', '_ptr_on_stack', '_sgen_gc_descr_has_references', '_mono_gc_memmove_atomic', '_mono_gc_memmove_aligned', '_ves_icall_System_Reflection_MethodBase_GetMethodFromHandleInternalType_native', '_mono_method_get_object_handle', '_method_object_construct', '_mono_class_get_mono_cmethod_class', '_ves_icall_Mono_RuntimeGPtrArrayHandle_GPtrArrayFree', '_ves_icall_System_Reflection_MonoMethodInfo_get_parameter_info', '_mono_param_get_objects_internal', '_mono_class_get_mono_parameter_info_class', '_mono_array_new_handle', '_ves_icall_InternalInvoke', '_mono_class_is_abstract_3197', '_mono_runtime_invoke_array_checked', '_mono_runtime_try_invoke_array', '_ves_icall_System_GC_get_ephemeron_tombstone', '_ves_icall_System_GC_SuppressFinalize', '_mono_type_create_from_typespec', '_mono_class_get_nullable_param', '_ves_icall_System_Threading_Interlocked_CompareExchange_T', '_ves_icall_System_Object_MemberwiseClone', '_mono_object_clone_checked', '_mono_gc_wbarrier_object_copy', '_ves_icall_System_Globalization_CultureInfo_get_current_locale_name', '_get_current_locale_name', '_get_posix_locale', '_ves_icall_System_Threading_Monitor_Monitor_try_enter_with_atomic_var', '_mono_monitor_try_enter_internal', '_lock_word_is_free', '_lock_word_new_flat', '_mono_monitor_exit', '_mono_monitor_ensure_owned', '_lock_word_is_flat', '_lock_word_get_owner', '_lock_word_is_inflated', '_mono_monitor_exit_flat', '_lock_word_is_nested', '_ves_icall_System_Environment_GetEnvironmentVariable_native', '_ves_icall_System_Reflection_Assembly_GetExecutingAssembly', '_mono_stack_walk_no_il', '_mono_get_eh_callbacks', '_interp_walk_stack_with_ctx', '_stack_walk_adapter', '_get_executing', '_key_is_tombstone', '_reflected_equal', '_mono_icall_handle_new_interior', '_mono_handle_new_interior', '_ves_icall_System_Reflection_Assembly_GetManifestResourceInternal', '_mono_module_get_object_handle', '_module_object_construct', '_mono_class_get_mono_module_class', '_mono_string_new_handle', '_mono_handle_assign_3135', '_mono_image_get_resource', '_sgen_nursery_alloc', '_sgen_fragment_allocator_par_alloc', '_ves_icall_System_Object_GetType', '_mint_type', '_mono_value_box_checked', '_ves_icall_System_Environment_get_Platform', '_wasm_invoke_viiii', '_ves_icall_System_Runtime_InteropServices_Marshal_copy_from_unmanaged', '_ves_icall_System_Array_FastCopy', '_mono_gc_wbarrier_arrayref_copy', '_mono_g_hash_table_foreach', '_alloc_thread_static_data_helper', '_ves_icall_System_Reflection_Assembly_get_fullName', '_mono_stringify_assembly_name', '_ves_icall_System_Type_internal_from_name', '_mono_reflection_parse_type_checked', '__mono_reflection_parse_type', '_assembly_name_to_aname', '_isalnum', '_isalpha', '_strtoul', '_strtox_768', '___shlim', '___intscan', '_mono_identifier_unescape_info', '_mono_identifier_unescape_type_name_chars', '_type_from_parsed_name', '_mono_method_get_last_managed', '_last_managed', '_get_caller_no_system_or_reflection', '_mono_reflection_get_type_checked', '_mono_reflection_get_type_with_rootimage', '_mono_reflection_get_type_internal', 
'_mono_stack_mark_init_5740', '_mono_stack_mark_pop_5743', '_mono_reflection_free_type_info', '_ves_icall_RuntimeTypeHandle_IsGenericVariable', '_is_generic_parameter', '_ves_icall_RuntimeTypeHandle_HasInstantiation', '_mono_class_is_gtd_3171', '_ves_icall_RuntimeTypeHandle_IsArray', '_ves_icall_RuntimeTypeHandle_IsByRef', '_ves_icall_RuntimeTypeHandle_IsPointer', '_vell_icall_get_method_attributes', '_ves_icall_RuntimeTypeHandle_GetAttributes', '_mono_class_has_gtd_parent', '_ves_icall_System_Threading_Interlocked_Increment_Int', '_ves_icall_System_GCHandle_GetTargetHandle', '_ves_imethod', '_ves_array_get', '_mono_wasm_set_elem_from_vnode', '_mono_wasm_string_get_utf8', '_mono_string_to_utf8', '_unary_arith_op', '_mono_object_unbox', '_mono_class_get_full', '_ves_icall_System_GCHandle_GetTarget', '_mono_gchandle_get_target', '_sgen_gchandle_get_target', '_sgen_array_list_get_slot_8701', '_sgen_array_list_bucketize_8704', '_sgen_array_list_index_bucket_8685', '_sgen_array_list_bucket_size_8686', '_link_get', '_sgen_dummy_use_8702', '_sgen_client_ensure_weak_gchandles_accessible', '_sgen_card_table_wbarrier_value_copy', '_sgen_card_table_mark_range', '_sgen_card_table_number_of_cards_in_range', '_ves_icall_System_Array_GetLowerBound', '_wasm_invoke_viiiiii', '_ves_icall_System_NumberFormatter_GetFormatterTables', '_mono_value_copy_array', '_mono_signature_hash', '_monoeg_strdup_5161', '_bitshift64Ashr', '_ves_icall_RuntimeTypeHandle_GetElementType', '_ves_icall_System_Array_GetValueImpl', '_mono_wasm_invoke_js', '_mono_free', '_mono_string_from_utf16', '_mono_string_from_utf16_checked', '_mono_class_is_variant_compatible', '_ves_icall_System_Array_CreateInstanceImpl', '_mono_array_new_full_checked', '_ves_icall_RuntimeType_GetPropertiesByName_native', '_mono_class_get_properties', '_mono_class_setup_properties', '_mono_class_get_property_info', '_mono_metadata_properties_from_typedef', '_mono_metadata_methods_from_property', '_mono_class_set_property_info', '_property_hash', '_ves_icall_System_Reflection_PropertyInfo_internal_from_handle_type', '_mono_property_get_object_handle', '_property_object_construct', '_mono_class_get_mono_property_class', '_ves_icall_System_Array_GetGenericValueImpl', '_ves_icall_MonoPropertyInfo_get_property_info', '_mono_class_get_mono_method_class', '_ves_icall_get_method_info', '_param_objects_construct', '_mono_method_get_param_names', '_mono_method_get_index', '_mono_method_get_marshal_info', '_add_parameter_object_to_array', '_get_dbnull', '_get_dbnull_object', '_mono_class_get_dbnull_class', '_mono_field_get_value_object_checked', '_mono_field_static_get_value_checked', '_mono_field_static_get_value_for_thread', '_ves_icall_RuntimeTypeHandle_IsInstanceOfType', '_ves_icall_MonoMethod_get_IsGenericMethod', '_mono_object_get_virtual_method', '_mono_object_handle_get_virtual_method', '_class_get_virtual_method', '_invoke_array_extract_argument', '_expand_table_11899', '_conc_table_lf_free_11900', '_conc_table_free_11892', '_ves_icall_System_Array_GetLength', '_ves_icall_System_Array_SetValueImpl', '_array_set_value_impl', '_mono_array_handle_pin_with_size', '_mono_gchandle_from_handle', '_handle_to_chunk_element', '_chunk_element_to_chunk_idx', '_bucket_alloc_callback', '_mono_gchandle_free', '_sgen_gchandle_free', '_sgen_client_gchandle_destroyed', '_mono_object_hash', '_lock_word_has_hash', '_lock_word_new_thin_hash', '_sgen_alloc_obj_nolock', '_sgen_los_alloc_large_inner', '_sgen_ensure_free_space', '_get_los_section_memory', '_get_from_size_list', '_add_free_chunk', '_randomize_los_object_start', '_ves_icall_System_Array_ClearInternal', '_mono_gc_bzero_atomic', '_mono_gc_bzero_aligned'];

function annotateFunctionCalls() {
    var inputLines = fs.readFileSync(asmJsInputFilename, { encoding: 'utf8' }).split('\n');
    var outputLines = [];
    var nextFunctionId = 0;
    
    for (var lineIndex = 0; lineIndex < inputLines.length; lineIndex++) {
        var line = inputLines[lineIndex];

        if (line.startsWith('function _')) {
            // Process this function to the end
            var functionName = /function ([^(]+)/.exec(line)[1];
            var isFirstLineInFunction = true;
            if (isAnnotatableFunction(functionName)) {                
                while (lineIndex < inputLines.length) {
                    line = inputLines[lineIndex];
                    outputLines.push(line);

                    if (isFirstLineInFunction) {
                        isFirstLineInFunction = false;
                        outputLines.push(`_registerUsedFunction('${functionName}');`)
                    }

                    if (line.charAt(0) === '}') {
                        break;
                    }

                    lineIndex++;
                }
            } else {
                outputLines.push(line);
            }
        } else {
            outputLines.push(line);
        }
    }

    fs.writeFileSync(asmJsOutputFilename, outputLines.join('\n'));
}

function isAnnotatableFunction(functionName) {
    return true;
}

function stripFunctionCalls() {
    var inputLines = fs.readFileSync(asmJsInputFilename, { encoding: 'utf8' }).split('\n');
    var outputLines = [];
    var nextFunctionId = 0;
    
    for (var lineIndex = 0; lineIndex < inputLines.length; lineIndex++) {
        var line = inputLines[lineIndex];

        if (line.startsWith('function _')) {
            // Process this function to the end
            var functionName = /function ([^(]+)/.exec(line)[1];
            var isFirstLineInFunction = true;
            if (isStrippableFunctionFunction(functionName)) {                
                while (lineIndex < inputLines.length) {
                    line = inputLines[lineIndex];

                    if (isFirstLineInFunction) {
                        isFirstLineInFunction = false;
                        
                        outputLines.push(`function ${functionName}() {}`);
                    }

                    if (line.charAt(0) === '}') {
                        break;
                    }

                    lineIndex++;
                }
            } else {
                outputLines.push(line);
            }
        } else {
            outputLines.push(line);
        }
    }

    var resultCode = outputLines.join('\n');

    // Minify
    var uglifyResult = UglifyJS.minify(resultCode);
    if (uglifyResult.error) {
        throw new Error(uglifyResult.error);
    }
    resultCode = uglifyResult.code;

    fs.writeFileSync(asmJsOutputFilename, resultCode);
}

function isStrippableFunctionFunction(name) {
    return isAnnotatableFunction(name) && usedFunctionNames.indexOf(name) < 0;
}

//annotateFunctionCalls(asmJsInputFilename);
stripFunctionCalls();
